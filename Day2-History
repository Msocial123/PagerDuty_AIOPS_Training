    1  git --version
    2  git clone https://github.com/Msocial123/PagerDuty_AIOPS_Training.git
    3  ls
    4  cd PagerDuty_AIOPS_Training/
    5  ls
    6  cd Cluster-Setup/
    7  clear
    8  ls
    9  chmod 777 cluster.sh
   10  sh cluster.sh
   11  aws --version
   12  eksctl -version
   13  eksctl --version
   14  eksctl
   15  snap install kubectl --classic
   16  aws configure
   17  clear
   18  eksctl create cluster --name murali-test-cluster   --version 1.34   --region ap-south-1   --nodegroup-name murali-test-linux   --node-type t2.medium   --nodes 2   --nodes-min 2   --nodes-max 5   --managed
   19  aws eks update-kubeconfig --name murali-test-cluster --region ap-south-1
   20  clear
   21  kubectl get nodes
   22  kubectl get pods
   23  kubectl get deployments
   24  kubectl get svc
   25  cd ../..
   26  git clone -b master https://github.com/Msocial123/Fitness_Tracker.git
   27  clear
   28  ls
   29  cd Fitness_Tracker/
   30  ls
   31  kubectl apply -f app-deployment.yaml
   32  kubectl apply -f mongodb-deployment.yaml
   33  kubectl get deployments
   34  kubectl get rs
   35  kubectl get pods
   36  kubectl get pods -o wide
   37  kubectl get svc
   38  snap install helm --classic
   39  helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
   40  helm repo add grafana https://grafana.github.io/helm-charts
   41  helm repo update
   42  helm install prometheus prometheus-community/kube-prometheus-stack   --namespace monitoring --create-namespace
   43  kubectl get pods -n monitoring
   44  kubectl get pods -o wide -n monitoring
   45  kubectl patch svc prometheus-kube-prometheus-prometheus -n monitoring   -p '{"spec": {"type": "LoadBalancer"}}'
   46  helm install grafana grafana/grafana --namespace monitoring
   47  kubectl patch svc grafana -n monitoring   -p '{"spec": {"type": "LoadBalancer"}}'
   48  kubectl get svc -n monitoring
   49  history
   50  kubectl get secret --namespace monitoring grafana -o jsonpath="{.data.admin-password}" | base64 --decode
   51  clear
   52  aws eks update-kubeconfig --name murali-test-cluster --region ap-south-1
   53  kubectl get svc -n monitoring
   54  kubectl get pods -n monitoring
   55  kubectl -n monitoring get configmap alertmanager-config
   56  kubectl -n monitoring edit secret alertmanager-alertmanager
   57  helm list -A | grep prometheus
   58  clear
   59  helm get values prometheus -n monitoring > values.yaml
   60  vi values.yaml
   61  helm upgrade prometheus prometheus-community/kube-prometheus-stack   -n monitoring   -f values.yaml
   62  vi values.yaml
   63  helm upgrade prometheus prometheus-community/kube-prometheus-stack   -n monitoring   -f values.yaml   --reuse-values
   64  vi values.yaml
   65  kubectl -n monitoring get svc prometheus-kube-prometheus-prometheus -o yaml | grep type:
   66  clear
   67  vi values.yaml
   68  helm upgrade prometheus prometheus-community/kube-prometheus-stack   -n monitoring   -f values.yaml   --reuse-values
   69  kubectl -n monitoring get pods | grep alertmanager
   70  kubectl -n monitoring logs alertmanager-prometheus-kube-prometheus-alertmanager-0
   71  clear
   72  kubectl -n monitoring exec -it alertmanager-prometheus-kube-prometheus-alertmanager-0 -- sh
   73  kubectl get svc -n monitoring
   74  kubectl -n monitoring exec -it alertmanager-prometheus-kube-prometheus-alertmanager-0 -- sh
   75  clear
   76  kubectl create namespace argocd
   77  kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
   78  kubectl get pods -n argocd
   79  kubectl create -n argocd   -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
   80  clear
   81  kubectl get pods -n argocd
   82  Kubectl create ns retail
   83  kubectl create ns retail
   84  curl -sSL -o argocd-linux-amd64 https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64
   85  sudo install -m 555 argocd-linux-amd64 /usr/local/bin/argocd
   86  rm argocd-linux-amd64
   87  kubectl patch svc argocd-server -n argocd -p '{"spec": {"type": "LoadBalancer"}}'
   88  kubectl get svc -n argocd
   89  kubectl port-forward svc/argocd-server -n argocd 8080:443
   90  argocd admin initial-password -n argocd
   91  clear
   92  argocd admin initial-password -n argocd
   93  argocd login a5c924cc00ca34be9b21a5b42619530d-1586211754.ap-south-1.elb.amazonaws.com:80
   94  argocd account update-password
   95  kubectl config get-contexts -o name
   96  argocd cluster add Test-CloudThat@murali-test-cluster.ap-south-1.eksctl.io
   97  kubectl create namespace argo-rollouts
   98  kubectl apply -n argo-rollouts -f https://github.com/argoproj/argo-rollouts/releases/latest/download/install.yaml
   99  kubectl get pods -n argo-rollouts
  100  git clone https://github.com/Msocial123/Shine-GitOps-Project.git
  101  kubectl get deployments
  102  kubectl delete deployment fitness-tracker-app
  103  kubectl delete deployment mongodb
  104  ls
  105  cd Shine-GitOps-Project/
  106  ls
  107  cd Retail-chart/
  108  clear
  109  helm install retail-app .
  110  kubectl get svc -n argocd
  111  history
